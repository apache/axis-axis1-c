<project name="Apache Axis C Build Tools" default="" basedir="..">
	<!--
	  Compile the build tools
	  -->
	<target name="compileBuildTools" depends="initialize">
		<mkdir dir="${dir.classes}"/>
		<javac srcdir="${dir.tools}" destdir="${dir.classes}"/>
	</target>
	
	<!--
	  Package build tools code into buildtools.jar
	  -->
	<target name="buildTools" depends="compileBuildTools">
		<jar jarfile="${dir.classes}/buildtools.jar" basedir="${dir.classes}">
			<include name="org/apache/axis/tools/**"/>
		</jar>
	</target>
	
	<target name="runTraceTool">
		<path id ="cp">
			<fileset dir="${dir.classes}" includes="buildtools.jar"/>
		</path>
		<java classname="org.apache.axis.tools.trace.TraceInstrumentor" fork="true">
                  <classpath refid="cp"/>
			<arg value="-config"/>
			<arg value="${dir.tools}/org/apache/axis/tools/trace/tracetool.conf"/>
			<arg value="-include"/>
			<arg value="${dir.src}"/>
			<arg value="-include"/>
			<arg value="${dir.include}"/>
			<arg value="-source"/>
			<arg value="${dir.src}"/>
			<arg value="-target"/>
			<arg value="${dir.src.instrumented}"/>
		</java>
      </target>

	<!--
	  Compile, package and run the trace tool
	  -->
	<target name="addTrace" depends="buildTools, runTraceTool"
	  description="Compile, jar and run the trace tool"/>

</project>