<project name="initializeServer" default="decideserverproperties">
    <target name="decideserverproperties">

        <property name="wsdd.file" value="${dir.test.generated}${file.separator}server${file.separator}server.wsdd" />
        
        <if>
            <isset property="windows" />
            <then>
                <echo message="we are in windows" />

                <!-- environment variables start from here in pairs -->
                <property name="serverenv.env" value="PATH" />
                <property name="serverenv.env.value" value="${java.library.path};${dir.libraries}" />

                <!-- The path to axiscpp.conf -->
                <!-- Set location of axiscpp.conf file -->
                <condition property="axiscppconffile" value="${axiscpp_deploy}/server/axiscpp.conf">
                    <isset property="windows" />
                </condition>
                <condition property="axiscppconffile" value="${axiscpp_deploy}/server/etc/axiscpp.conf">
                    <not>
                        <isset property="windows" />
                    </not>
                </condition>

                <if>
                    <istrue value="${server.apache1}" />
                    <then>
                        <property name="serverexecutable" value="${env.APACHE_HOME}\apache" />
                        <property name="startargs" value="-k start" />
                        <property name="stopargs" value=" -k stop" />

                    </then>
                    <else>
                        <if>
                            <istrue value="${server.apache2}" />
                            <then>
                                <property name="serverexecutable" value="${env.APACHE2_HOME}\bin\apache" />
                                <property name="startargs" value=" " />
                            </then>
                            <elseif>
                                <istrue value="${server.simpleaxisserver}" />
                                <then>
                                    <property name="serverexecutable" value="${dir.release}/bin/${simpleAxisServerExecutableName}${executableSuffix}" />
                                    <property name="startargs" value=" ${testPort}" />
                                </then>
                            </elseif>
                        </if>
                    </else>
                </if>
            </then>
            <elseif>
                <isset property="linux" />
                <then>
                    <echo message="we are in linux" />

                    <!-- environment variables start from here in pairs -->
                    <property name="serverenv.env" value="LD_LIBRARY_PATH" />
                    <property name="serverenv.env.value" value="${dir.libraries}:${basedir}/../../../Axis/webservices:${env.LD_LIBRARY_PATH}" />
                    <!-- The path to axiscpp.conf -->
                  <!--  <property name="axiscppconffile" value="${basedir}/../../../Axis/etc/axiscpp.conf" /> -->
				
			   <condition property="axiscppconffile" value="${axiscpp_deploy}/server/etc/axiscpp.conf">
                    <not>
                        <isset property="windows" />
                    </not>
                    </condition>


                    <if>
                        <istrue value="${server.apache1}" />
                        <then>
                            <property name="serverexecutable" value="${env.APACHE_HOME}/bin/apachectl" />
                            <property name="startargs" value=" start" />
                            <property name="stopargs" value=" stop"/>
                        </then>
                        <else>
                            <if>
                                <istrue value="${server.apache2}"/>
                                <then>
                                    <property name="serverexecutable" value="${env.APACHE2_HOME}/bin/apachectl"/>
                                    <property name="startargs" value=" start"/>
                                    <property name="stopargs" value=" stop"/>
                                </then>
                                <elseif>
                                    <istrue value="${server.simpleaxisserver}"/>
                                    <then>
                                        <property name="serverexecutable" value="${dir.release}/bin/${simpleAxisServerExecutableName}${executableSuffix}"/>
                                        <property name="startargs" value=" ${testPort}"/>
                                    </then>
                                </elseif>
                            </if>
                        </else>
                    </if>
                </then>
            </elseif>
        </if>
    </target>
</project>
