<project name="Apache Axis C Trace Tool" default="" basedir="..">
	<!--
	  Compile the Trace tool
	  -->
	<target name="compileTraceTool" depends="initialize">
		<mkdir dir="${dir.classes}"/>
		<javac srcdir="${dir.tools}" destdir="${dir.classes}"/>
	</target>
	
	<!--
	  Package Trace tool code into tracetool.jar
	  -->
	<target name="buildTraceTool" depends="compileTraceTool">
		<jar jarfile="${dir.classes}/tracetool.jar" basedir="${dir.classes}">
			<include name="org/apache/axis/tools/**"/>
			<manifest>
				<attribute name="Main-Class"
				 value="org.apache.axis.tools.trace.TraceInstrumentor"/>
			</manifest>
		</jar>
	</target>
	
	<target name="runTraceTool">
		<java jar="${dir.classes}/tracetool.jar" fork="true">
			<arg value="-config"/>
			<arg value="${dir.tools}/org/apache/axis/tools/trace/tracetool.conf"/>
			<arg value="-include"/>
			<arg value="${dir.src}"/>
			<arg value="-include"/>
			<arg value="${dir.include}"/>
			<arg value="-source"/>
			<arg value="${dir.src}"/>
			<arg value="-target"/>
			<arg value="${dir.src.instrumented}"/>
		</java>
      </target>

	<!--
	  Compile, package and run the trace tool
	  -->
	<target name="addTrace" depends="buildTraceTool, runTraceTool"
	  description="Compile, jar and run the trace tool"/>

</project>