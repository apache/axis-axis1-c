AC_INIT(FULL-PACKAGE-NAME, VERSION, BUG-REPORT-ADDRESS)
AM_INIT_AUTOMAKE(0.3)
AM_CONFIG_HEADER(config.h)
PACKAGE=apache_axisc++

AC_MSG_CHECKING(whether to build test cases)
AC_ARG_ENABLE(testcases, [  --enable-testcases    build test cases.],
[ case "${enableval}" in
  no)
    AC_MSG_RESULT(no)
    TESTCASESBUILD=""
    ;;
  *)
    AC_MSG_RESULT(yes)
    TESTCASESBUILD="tests"
    
    ;;
  esac ],
  AC_MSG_RESULT(no)
  TESTCASESBUILD="tests"
)

AC_MSG_CHECKING(whether to build samples)
AC_ARG_ENABLE(samples, [  --enable-samples    build samples.],
[ case "${enableval}" in
  no)
    AC_MSG_RESULT(no)
    SAMPLESBUILD=""
    ;;
  *)
    AC_MSG_RESULT(yes)
    SAMPLESBUILD="samples"
    
    ;;
  esac ],
  AC_MSG_RESULT(no)
  SAMPLESBUILD="samples"
)


AC_MSG_CHECKING(whether write to log)
AC_ARG_ENABLE(log, [  --enable-log    enable log facility.],
[ case "${enableval}" in
  no)
    AC_MSG_RESULT(no)
    ENABLELOGGING=""
    ;;
  *)
    AC_MSG_RESULT(yes)
    ENABLELOGGING="-DENABLE_AXISTRACE"
    
    ;;
  esac ],
  AC_MSG_RESULT(no)
  ENABLELOGGING="-DENABLE_AXISTRACE"
)

APACHE2INC=$apache2inc
APACHEINC=$apacheinc
XERCESCINC=$xercescinc
XERCESCLIB=$xercesclib
EXPATINC=$expatinc
EXPATLIB=$expatlib
LINKCLIENTLIB="-L${AXISCPP_DEPLOY}/lib -laxiscpp_client -ldl"
AC_SUBST(APACHE2INC)
AC_SUBST(APACHEINC)
AC_SUBST(XERCESCINC)
AC_SUBST(XERCESCLIB)
AC_SUBST(EXPATINC)
AC_SUBST(EXPATLIB)
AC_SUBST(XERCESCBUILD)
AC_SUBST(EXPATBUILD)
AC_SUBST(APACHE2BUILD)
AC_SUBST(APACHEBUILD)
AC_SUBST(LINKCLIENTLIB)
AC_SUBST(TESTCASESBUILD)
AC_SUBST(SAMPLESBUILD)
AC_SUBST(LIBWWWBUILD)

CFLAGS="-Wall -Wshadow ${ENABLELOGGING}"
CPPFLAGS="-Wall -Wshadow ${ENABLELOGGING}"
LDFLAGS="-s -lstdc++"
AC_PROG_CC
AC_PROG_CXX
AC_PROG_INSTALL
AC_PROG_LIBTOOL

AC_OUTPUT(Makefile \
    samples/Makefile \
    samples/server/Makefile \
    samples/server/interoptests/Makefile \
    samples/server/interoptests/base/Makefile \
    samples/server/interoptests/cbase/Makefile \
    samples/server/interoptests/groupB/Makefile \
    samples/server/interoptests/cgroupB/Makefile \
    samples/server/interoptests/doclitbase/Makefile \
    samples/server/interoptests/doclitgroupB/Makefile \
    samples/server/simple/Makefile \
    samples/server/rpcfault/Makefile \
    samples/server/doclitfault/Makefile \
    samples/server/echoStringHeaderHandler/Makefile \
    samples/client/Makefile \
    samples/client/interoptests/Makefile \
    samples/client/interoptests/base/Makefile \
    samples/client/interoptests/cbase/Makefile \
    samples/client/interoptests/groupB/Makefile \
    samples/client/interoptests/cgroupB/Makefile \
    samples/client/interoptests/doclitbase/Makefile \
    samples/client/interoptests/doclitgroupB/Makefile \
    samples/client/simple/Makefile \
    samples/client/rpcfault/Makefile \
    samples/client/doclitfault/Makefile \
    samples/client/testHandler/Makefile \
    tests/Makefile \
    tests/client/Makefile \
    tests/client/stubTest/Makefile \
    tests/client/stubTest/stubBase/Makefile \
    tests/client/interop/Makefile \
    tests/client/interop/round1/Makefile \
    tests/client/interop/round1/gen_src/Makefile \
    tests/client/threadSafe/Makefile \
    tests/client/threadSafe/gen_src/Makefile
    tests/client/fault_mapping/Makefile \
    tests/client/fault_mapping/gen_src/Makefile \
    tests/client/exceptionTest/Makefile \
    tests/client/exceptionTest/gen_src/Makefile \
    tests/client/soapHeader/Makefile \
    tests/client/soapHeader/test1/Makefile \
    tests/client/soapHeader/test1/rpc/Makefile \
    tests/client/soapHeader/test2/Makefile \
    tests/client/soapHeader/test2/rpc/Makefile \
    tests/client/soapHeader/test3/Makefile \
    tests/client/soapHeader/test3/rpc/Makefile \
    tests/client/soapHeader/test4/Makefile \
    tests/client/soapHeader/test4/rpc/Makefile \
    tests/client/soapHeader/test6/Makefile \
    tests/client/soapHeader/test6/rpc/Makefile \
    tests/client/soapHeader/test8/Makefile \
    tests/client/soapHeader/test8/rpc/Makefile \
    tests/client/soapHeader/test9/Makefile \
    tests/client/soapHeader/test9/rpc/Makefile \
    tests/client/soapHeader/test10/Makefile \
    tests/client/soapHeader/test10/rpc/Makefile \
    tests/client/xsdAnyTest1/Makefile \
    tests/client/xsdAnyTest1/gen_src/Makefile \
    tests/client/httpHeader/Makefile \
    tests/client/httpHeader/test1/Makefile \
    tests/client/httpHeader/test1/rpc/Makefile \
    tests/client/httpHeader/test2/Makefile \
    tests/client/httpHeader/test2/rpc/Makefile \
    tests/client/httpHeader/test3/Makefile \
    tests/client/httpHeader/test3/rpc/Makefile \
    tests/client/httpHeader/test4/Makefile \
    tests/client/httpHeader/test4/rpc/Makefile \
    tests/client/httpHeader/test5/Makefile \
    tests/client/httpHeader/test5/rpc/Makefile \
    tests/client/httpHeader/test7/Makefile \
    tests/client/httpHeader/test7/rpc/Makefile \
    tests/client/httpHeader/test8/Makefile \
    tests/client/httpHeader/test8/rpc/Makefile \
    tests/server/Makefile \
    tests/server/exceptionTest/Makefile \
    tests/server/exceptionTest/gen_src/Makefile \
    tests/server/xsdAnyTest1/Makefile \
    tests/server/xsdAnyTest1/gen_src/Makefile)
