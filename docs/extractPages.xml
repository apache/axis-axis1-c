<!-- ****************************************************************** -->
<!--                                                                    -->
<!--  Module Name: %W%                                                  -->
<!--                                                                    -->
<!--  Description:                                                      -->
<!--                                                                    -->
<!--  IBM Confidential                                                  -->
<!--                                                                    -->
<!--  OCO Source Materials                                              -->
<!--                                                                    -->
<!--  5724-M08                                                          -->
<!--  (c) Copyright IBM Corp. 2004, 2005                                -->
<!--                                                                    -->
<!--  The source code for this program is not published or other-       -->
<!--  wise divested of its trade secrets, irrespective of what has      -->
<!--  been deposited with the U.S. Copyright Office.                    -->
<!--                                                                    -->
<!--                                                                    -->
<!--  Version: %Z% %W% %I% %E% %U%                                      -->
<!--                                                                    -->
<!-- ****************************************************************** -->

<project name="Extract the Axis web pages" default="extractSite" basedir="../..">
 <description>
NOTES
=====
Before running this script, the following prereqisties are required:-
* The environment variable JAVA_HOME has been set.
* The environment variable FORREST_HOME has been set (this also assumes that
  FORREST has also been downloaded and built and that FORREST_HOME/bin has
  been added to the path environment variable).
* Logged onto CVS using putty or some other SSH connection (If you have not,
  or your connection has timed out, you will get the following error:-
  "connect to localhost:2401 failed: No connection could be made because the
  target machine actively refused it.").

Command Line Syntax
===================

ant -f extractPages.xml -DuserId=[User Id used to logon to current CVS session] -Dpassword=[User Id's CVS password]

e.g.
ant -f extractPages.xml -DuserId=bloggsf -Dpassword=Pa5sw6rd

 </description>

 <property name="ws-site.dir.download" value="${basedir}/.."/>
 <property name="ws-site.packageName"  value="ws-site"/>
 <property name="site.dir.download"    value="${basedir}/.."/>
 <property name="site.packageName"     value="ws-axis/site"/>
 <property name="dollar"               value="$"/>
 <property name="default.userId"       value="${dollar}{userId}"/>
 <property name="default.password"     value="${dollar}{password}"/>

<!-- ******************************************************************************************************************
     * Extract all of the files required to build the AXIS web site pages from CVS.  Unfortunately, you have extract  *
     * the complete ws-site project which takes about 40 minutes to download.                                         *
     ******************************************************************************************************************
 -->
 <target name="extractSite" description="Extract ws-axis/site and ws-site from CVS">
  <if> <equals arg1="${userId}" arg2="${default.userId}"/>
   <then>
    <echo message="Error: userId has not been defined."/>
   </then>
   <else>
    <if> <equals arg1="${password}" arg2="${default.password}"/>
     <then>
      <echo message="Warning: password has not been defined."/>
     </then>
     <else>
      <cvspass cvsroot=":ssh:${userId}@cvs.apache.org:/home/cvs" password="${password}"/>
     </else>
    </if>

    <delete dir="${site.dir.download}/${site.packageName}"/>
    <echo message="Warning: ${site.packageName} will take about 2 minutes to extract from CVS!"/>
    <echo message="                                    ==="/>
    <echo message="About to download ${site.packageName} to ${site.dir.download}"/>
    <cvs cvsRoot=":ssh:${userId}@cvs.apache.org:/home/cvs"
         command="checkout"
         package="${site.packageName}"
         dest="${site.dir.download}"
         reallyquiet="true"/>

    <delete dir="${ws-site.dir.download}/${ws-site.packageName}"/>
    <echo message="Warning: ${ws-site.packageName} will take about 40 minutes to extract from CVS!"/>
    <echo message="                               ===="/>
    <echo message="About to download ${ws-site.packageName} to ${ws-site.dir.download}"/>
    <cvs cvsRoot=":ssh:${userId}@cvs.apache.org:/home/cvs"
         command="checkout"
         package="${ws-site.packageName}"
         dest="${ws-site.dir.download}"
         reallyquiet="true"/>
   </else>
  </if>
 </target>

</project>