<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0059)http://www.cse.mrt.ac.lk/~hemapani/JSR109/architecture.html -->
<HTML><HEAD>
<META http-equiv=Content-Type content="text/html; charset=windows-1252">
<META content="MSHTML 6.00.2600.0" name=GENERATOR></HEAD>
<BODY>
<H1>JSR109 Architecture </H1>
<P>This is just a opening point to the discussion. This may change completely 
and there is lot to improve here. </P>

<H2>Server side Implementation</H2>
<H3>This is how it looks like when the Wraper Web service is generated and 
deployed in the JAX-RPC runtime</H3><IMG src="images/image005.gif"> 
<p>Put it very simply there is a Jaxrpc-runtime has WS and a J2EE container has a 
EJB. We are fill the implementation of the WS so as to lookup the service and invoke ejb.
<br>

	
<br>
<BR>

<H2>Client side Implementation</H2>
<p>There are two cases to adressed here, The Client stub's and Dynamic proxy.
We will support only the stub's first.</p>
<p>What we need id WSDL2Java with
<ul>
<li>jaxrpc-mapping support</li>
<li>JAXR support</li>
</ul>

<p>with the support of the Ias jaxrpc-mapper we are supporting first one now.
The JAXR supported is TODO. </P><BR>


<H3>JSR109 implementation</H3>
<p> the code we have in the sf.net support follwing two senario's<p><br>
 1)(webservice.xml + jaxrpcmapper.xml + x.wsdl) --ws4j2ee-> 
 (wrapping webservice and axis classes + ejb classes + ejb-jar.xml)<br>
 2)(ejb classes + ejb-jar.xml) -ws4j2ee-> (webservice.xml + jaxrpcmapper.xml + x.wsdl
 + wrapping webservice and axis classes)<br><br>
 
<h3>The tool when the DD + webservice.xml is avalible</h3>
<IMG src="images/image001.gif"> <br>

<h3>The tool when the DD + webservice.xml is not avalible</h3>
<IMG src="images/image002.gif"> 
<br>
<p>
We are using JAXB to parse the DD's. we use jaxrpc mapper when we have the WSDL and 
use the WSDL2Java when we do not have theWSDL.
</p>


<P>
1) JAXRPC Mapping file Parser (Ias)<BR>
2) Webservice .xml Web.xml or ejb.xml parser's we will be using JAXB. We are having the
parser based code right now but are moving to replace them with JAXB code<BR>
3) Code genaration framework .. puting all the peices together is done. 
(srinath)<BR>
6) Wrapper WebService genarator:- We worte a primetive code that only do the look up
and acsess the ejb. Mapping of the Webservice context to the ejb context is to be done.<BR>
7)ws utils - simple code that support only the lookup is done.<BR>
8)EJB writer - done , but uses different style we are change's it to use the same style 
as the other code genarations.<BR>
</P>

to see the code please see the ews wesbservice's project CVS.


</PRE><BR>Note:<BR>----<BR>* (As Jeremy said we have to make sure there is no 
overlapping of work with geronimo. Only thing to worry is we should think of the 
case that JSR109 standalone. Say for JonAs. We should have clear interfaces for 
the interaction and have the required Geronimo code as a jar (may be). I believe 
we can work it out.)<BR>you should hook the XML parsing stuff into Geronimo's 
deployment mechanism - I believe Aaron Mulder was already asking what, if any, 
additional elements were needed in the vendor DDs. We want to avoid the case 
where the same XML gets parsed many times by many services. This should also be 
integrated with Geronimo's MBean model so that the web services specific 
components are manageable.<BR><BR>* When reuse the code's from somewhere else 
partially there is a issue of the future support, complexities etc. May be we 
rewrite them, or refractor. But I believe first of all we should have a brief 
look at least and decide what to do. We know they have got it right. We should 
try whether we can consolidate on there experiences.<BR><BR>
<P></P><BR>
<H2>Security</H2>
<p> Secutiy mapping of the ws->j2ee seem to area where very little work is done.
we may need to have to laod down how it is done.</p> <br> 

<P>The specification says that the web server should pass the security 
information (say BASIC-AUTH: user name and the password) to the J2EE server so 
that server can authenticate the User. To talk with the J2EE server the web 
server should use RMI-IIOP over SSL. The Authorization should be handling by the 
J2EE server. <BR><BR>If the security information is reside in the SOAP message 
it follows the same path. The web server will pass the information to the J2EE 
server over a secure connection. <BR><BR>There are two Questions to be answered 
<BR><BR>1)When to have the security? The deployment descriptor (I am not sure 
which one yet) should specify that should the web server use the RMI-IIOP over 
SSL to accesses the J2EE server. The generating wrapping web service will differ 
accordingly. <BR><BR>2)How the wrapper web service accesses the security 
information (How to accesses the MesssageContext) is an issue. I believe that 
JSR109Utils package is for the things like that. The method we are using is to have
a new provider (j2ee provider). We should 
define a common interface for this process to easily deal with the case that 
JAX-RPC runtime is not Axis. <BR>
<H4>We greately appriciate your comments at the geronimo-dev mailing lists - 
JSR109 team.</H4></BODY></HTML>
