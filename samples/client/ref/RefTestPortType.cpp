/*
 * This file was auto-generated by the Axis C++ Web Service Generator (WSDL2Ws)
 * This file contains Client Stub implementation for remote web service.
 */

#include "RefTestPortType.hpp"

#include <axis/AxisWrapperAPI.hpp>

using namespace std;

 extern int Axis_DeSerialize_intType(intType* param, IWrapperSoapDeSerializer* pDZ);
extern void* Axis_Create_intType(intType *Obj, bool bArray = false, int nSize=0);
extern void Axis_Delete_intType(intType* param, bool bArray = false, int nSize=0);
extern int Axis_Serialize_intType(intType* param, IWrapperSoapSerializer* pSZ, bool bArray = false);
extern int Axis_GetSize_intType();

RefTestPortType::RefTestPortType(const char* pchEndpointUri, AXIS_PROTOCOL_TYPE eProtocol)
:Stub(pchEndpointUri, eProtocol)
{
}

RefTestPortType::RefTestPortType()
:Stub(" ", APTHTTP1_1)
{
	m_pCall->setEndpointURI("http://localhost/axis/ref");
}

RefTestPortType::~RefTestPortType()
{
}


/*Methods corresponding to the web service methods*/

/*
 * This method wrap the service method echoInt
 */
intType* RefTestPortType::echoInt(intType* Value0)
{
	intType* pReturn = NULL;
	const char* pcCmplxFaultName;
	try
	{
		if (AXIS_SUCCESS != m_pCall->initialize(CPP_RPC_PROVIDER)) 
			return pReturn;
		m_pCall->setTransportProperty(SOAPACTION_HEADER , "ref#echoInt");
		m_pCall->setSOAPVersion(SOAP_VER_1_1);
		m_pCall->setOperation("echoInt", "http://soapinterop.org/");
		applyUserPreferences();
	m_pCall->addCmplxParameter(Value0, (void*)Axis_Serialize_intType, (void*)Axis_Delete_intType, "inputIntType", Axis_URI_intType);
		if (AXIS_SUCCESS == m_pCall->invoke())
		{
			if(AXIS_SUCCESS == m_pCall->checkMessage("echoIntResponse", "http://soapinterop.org/"))
			{
				pReturn = (intType*)m_pCall->getCmplxObject((void*) Axis_DeSerialize_intType, (void*) Axis_Create_intType, (void*) Axis_Delete_intType,"_return", 0);
		}
		}
	
	m_pCall->unInitialize();
		return pReturn;
	}
	catch(AxisException& e)
	{
		int iExceptionCode = e.getExceptionCode();
		if(AXISC_NODE_VALUE_MISMATCH_EXCEPTION != iExceptionCode)
		{
	
	m_pCall->unInitialize();
			throw ref_AxisClientException(e.what());
		}
		ISoapFault* pSoapFault = (ISoapFault*) m_pCall->checkFault("Fault","http://localhost/axis/ref" );
		if(pSoapFault)
		{
	
	m_pCall->unInitialize();
			throw ref_AxisClientException(pSoapFault);
		}
		else throw;
	}
}

int RefTestPortType::getFaultDetail(char** ppcDetail)
{
	return m_pCall->getFaultDetail(ppcDetail);
}

