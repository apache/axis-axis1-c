<html>
<head>
<meta http-equiv="Content-Type" content="text/html">
<title>Axis C++ Linux Installation Guide</title>
</head>
<body>
<h1>Axis C++ Linux Installation Guide</h1>
</div>
<div class="h3">
<div class="h3">
<h3>Installing and deploying web applications using xml-AxisC++</h3>
</div>
<div class="h3">
<h3>Contents</h3>
</div>

<li>
<a href="#Introducti">Introduction</a>
</li>
<li>
<a href="#What">What You Need</a>
</li>
<p>
<a name="Introducti"></a>
</p>
<div class="h3">
<h3>Introduction</h3>
</div>
<p>This guide will help you to start with Axis C++. I'll explain the minimum steps needed to build and run Axis C++, and warn you about the common pitfalls.</p>
<p>
<a name="What"></a>
</p>
<div class="h3">
<h3>What You need</h3>
</div>
<p>It needs a few helper libraries, for logging, WSDL processing and introspection. You need to have following in order to run Axis C++ engine.</p>
&nbsp &nbsp &nbsp RedHat 9(2.4.20-8) <br>
&nbsp &nbsp &nbsp expat-1.95.7(source) <br>
&nbsp &nbsp &nbsp xerces-c-src2_2_0(I build xerces from source) <br>
&nbsp &nbsp &nbsp httpd-2.0.48(source)<br>
&nbsp &nbsp &nbsp apache_1.3.27(source) <p>

<p><b>Note: In my environment I have autoconf 2.57, automake 1.6.3, libtool 1.4.3,  gcc 3.2.2</b></p>
<p> You can download the Axis C++ source or binary from one of the apache mirror sites <br>
    http://ws.apache.org/axis/cpp/download.html<br>
You can get expat from the uri http://sourceforge.net/projects/expat/<br>

You can get xercesc from the uri http://www.xml.apache.org/xerces-c/download.cgi<br>

You must define some environment variables in order to build.AXISCPP_HOME is where you checkout Axis C++</p>
<br>
<p><b>AXISCPP_HOME="/home/damitha/projects/axiscpp"<br>
AXIS_HOME="/home/damitha/Axis"<br>
EXPAT_HOME="/usr/local/expat1957"<br>
XERCESC_HOME="/usr/local/xerces-c"<br>
LD_LIBRARY_PATH="$XERCESC_HOME/lib:$EXPAT_HOME/lib:$AXISCPP_HOME/bin:$AXIS_HOME/libs:$LD_LIBRARY_PATH"<br>
export AXISCPP_HOME AXIS_HOME XERCESC_HOME EXPAT_HOME LD_LIBRARY_PATH</b></p>

<p><b>A note about AXIS_HOME</b></p>
<p>Copy $AXISCPP_HOME/deploy folder to a place of your choice and define AXIS_HOME pointing to it.<br>
cp -rf $AXISCPP_HOME/deploy /usr/local/<br>
mv /usr/local/deploy /usr/local/Axis<br>
Give read write permissions to /usr/local/Axis<br><br>

<p>EXPAT_HOME points to where you installed expat <br>
XERCESC_HOME points to where you installed xereces-c</p>

<p>Axis C++ core is independant of the parser layer and transport layer.</p>
<p>You can write your own transport or parser library according to the APIs provided. Currently Axis C++provides API implementations for Xerces-c and Expat. It also provides it's own client side transport library implementation. In the server side deployment, Axis C++ provides two modules that can be loaded into apache1.3 and apache 2 as shared libraries.</p>
<p>So this sums upto two posibilities.<br>
You can deploy Axis C++ server <br>
&nbsp &nbsp On Apache2 with xercesc parser or expat parser(Only one parser at a time)<br>
&nbsp &nbsp On Apache1.3 with xercesc parer or expat parser<br>
So if you use only Expat no need to define XERCESC_HOME vice versa.</p>

<p><b>When you build Axis C++ you can give options</b></p>
<p><b>1) Build for Apache2</b><br>
   With Expat parser support only<br>
   With Xerces parser support only<br>
   With both parser support</p>
<p><b>2) Build for Apache1.3</b><br>
   With Expat parser support only<br>
   With Xerces parser support only<br>
   With both parser support</p>
<p>You can choose these selections on $AXISCPP_HOME/configure.ac</p>

<p>#<b>{apache2 block starts</p>
<p>#if you use apache2 <br>
#if you need to build both axis_expat and axis_xerces libraries</b><br>


<p>AC_OUTPUT(Makefile src/Makefile src/common/Makefile src/soap/Makefile src/wsdd/Makefile src/xml/Makefile<br> src/transport/Makefile src/transport/axis/Makefile src/engine/Makefile src/engine/server/Makefile src/engine/client/Makefile <br> src/server/Makefile src/server/apache2/Makefile src/server/simple_axis_server/Makefile src/server/adminservice/Makefile<br> src/client/Makefile src/client/adminclient/Makefile src/xml/expat/Makefile src/xml/xerces/Makefile)</p>

<p><b>#if you need to build only axis_expat</b></p>
<p>#AC_OUTPUT(Makefile src/Makefile src/common/Makefile src/soap/Makefile src/wsdd/Makefile src/xml/Makefile<br> src/transport/Makefile src/transport/axis/Makefile src/engine/Makefile src/engine/server/Makefile src/engine/client/Makefile<br>  src/server/Makefile src/server/apache2/Makefile src/server/simple_axis_server/Makefile src/server/adminservice/Makefile<br> src/client/Makefile src/client/adminclient/Makefile src/xml/expat/Makefile)</p>

<p><b>#if you need to build only axis_xerces</b></p>
<p>#AC_OUTPUT(Makefile src/Makefile src/common/Makefile src/soap/Makefile src/wsdd/Makefile src/xml/Makefile<br> src/transport/Makefile src/transport/axis/Makefile src/engine/Makefile src/engine/server/Makefile src/engine/client/Makefile<br>  src/server/Makefile src/server/apache2/Makefile src/server/simple_axis_server/Makefile src/server/adminservice/Makefile<br> src/client/Makefile src/client/adminclient/Makefile src/xml/xerces/Makefile)</p>

<p><b>#apache2 block ends</b><br>
                                                                                                                             
#<b>{apache1.3 block starts</b><br>
<p><b>#if you use apache1.3 and  you need to build both axis_expat and axis_xerces libraries</b></p>
<p>#AC_OUTPUT(Makefile src/Makefile src/common/Makefile src/soap/Makefile src/wsdd/Makefile src/xml/Makefile<br> src/transport/Makefile src/transport/axis/Makefile src/engine/Makefile src/engine/server/Makefile src/engine/client/Makefile<br>  src/server/Makefile src/server/apache/Makefile src/server/simple_axis_server/Makefile src/server/adminservice/Makefile<br> src/client/Makefile src/client/adminclient/Makefile src/xml/expat/Makefile src/xml/xerces/Makefile)</p>

<p><b>#if you need to build only axis_expat</b></p>
<p>#AC_OUTPUT(Makefile src/Makefile src/common/Makefile src/soap/Makefile src/wsdd/Makefile src/xml/Makefile<br> src/transport/Makefile src/transport/axis/Makefile src/engine/Makefile src/engine/server/Makefile src/engine/client/Makefile<br>  src/server/Makefile src/server/apache/Makefile src/server/simple_axis_server/Makefile src/server/adminservice/Makefile<br> src/client/Makefile src/client/adminclient/Makefile src/xml/expat/Makefile)</p>

<p><b>#if you need to build only axis_xerces</b></p>
<p>#AC_OUTPUT(Makefile src/Makefile src/common/Makefile src/soap/Makefile src/wsdd/Makefile src/xml/Makefile<br> src/transport/Makefile src/transport/axis/Makefile src/engine/Makefile src/engine/server/Makefile src/engine/client/Makefile<br>  src/server/Makefile src/server/apache/Makefile src/server/simple_axis_server/Makefile src/server/adminservice/Makefile<br> src/client/Makefile src/client/adminclient/Makefile src/xml/xerces/Makefile)</p>

<p>#}apache1.3 block ends</p>

<p>You also need to  do a selection at $AXISCPP_HOME/src/xml/Makefile.am</p>
<p>SUBDIRS = expat xerces #Here I build both expat and xerces libraries<br>
#SUBDIRS = expat<br>
#SUBDIRS = xerces</p>
<p>And again in $AXISCPP_HOME/src/server/Makefile.am</p>

<p>#if you use apache2<br>
SUBDIRS = apache2 adminservice #Here I build for Apache2<br>
                                                                                                                             
#if you use apache1.3<br>
#SUBDIRS = apache adminservice</p>

<p>Now you need to copy header files from apache and parser that  you use</p>
<p>Install xercesc at /usr/local/xerces-c, expat at /usr/local/expat1957,apache2 at /usr/local/apache2 and apache1.3 at /usr/local/apache</p>

<p><b>Building Axis C++ for apache2 and for both xercesc and expat. (better to use one)</b>Instructions to build both are given above</p>
<p>cp -rf /usr/local/xerces-c/include/xercesc/* $AXISCPP_HOME/include/xercesc/<br>
cp -f /usr/local/expat1957/include/expat.h $AXISCPP_HOME/include/expat/<br>
cp -f /usr/local/apache2/include/* $AXISCPP_HOME/include/apache2_0/</p>

<p>Then can build Axis C++ server, client,parser libraries, transport library and server/client samples by,
cd $AXISCPP_HOME<br>
sh build.sh</p>

<p>You can see the folder $AXISCPP_HOME/bin to see what are created</p>
<p>libaxis_mod.so is apache module which is loaded when apache loads<br>
libaxis_mod2.so is apache2 module which is loaded when apache2 loads<br>
libserver_engine.so is the Axis C++ server engine which is loaded by libaxis_mod(2).so module<br>
libaxiscpp_client.so is Axis C++ client library<br>
libaxis_transport.so is the Axis C++ client transport library<br>
libaxis_expat.so is the expat parser library implementation for Axis C++<br>
libaxis_xercesc.so is the xercesc parser library implmentation for Axis C++</p>

<p>Also $AXISCPP_HOME/samples/server samples are built and installed in $AXIS_HOME/web_services</p>
<p>$AXISCPP_HOME/samples/client samples are built and executables are in $AXISCPP_HOME/samples/client</p>
<p>Parser and Transport libraries are loaded into axis engine when it is loaded by apache.</p>
<p>Now you need to add to $<apache install directory>/conf/httpd.conf<br>
$ vi <apache install directory>/conf/httpd.conf</p>

<p>At the bottom of the file you have to include following lines and save it.</p>
<p>LoadModule axis_module modules/libaxiscpp_mod2.so (in apache1.3 replace modules with libexec and libaxiscpp_mod2.so with libaxiscpp_mod.so)<br>
<Location /axis><br>
SetHandler axis<br>
</Location> </p>

<p>Now you need the deployment descripter to deploy server samples you built</p>
<p>cd $AXIS_HOME/conf<br>
mv server.wsdd_linux server.wsdd</p>
<p>In $AXIS_HOME/axiscpp.conf file you can give paths to<br>
your log files, configuration files libraries etc</p>

<p># The comment character is '#'<br>
#Available directives are as follows<br>
#(Some of these directives may not be implemented yet)<br>
#<br>
#WSDDFilePath:The path to the server wsdd<br>
#LogPath:The path to the axis log<br>
#ClientLogPath:The path to the axis client log<br>
#ClientWSDDFilePath:The path to the client wsdd<br>
#Transport_http:The HTTP transport library<br>
#Transport_smtp:The SMTP transport library<br>
#XMLParser:The xml parser library.</p>

<p>LogPath:/usr/local/Axis/logs/AxisLog<br>
WSDDFilePath:/usr/local/Axis/conf/server.wsdd<br>
ClientLogPath:/usr/local/Axis/logs/AxisClientLog<br>
XMLParser:/usr/local/Axis/libs/libaxis_xmlparser.so<br>
Transport_http:/usr/local/Axis/libs/libaxis_transport.so</p>

<p>Now we need to copy neccessary libraries to the correct places and start apache. To do that you can find scripts written in $AXIS_HOME.<br>
cd $AXIS_HOME</p>

<p>To deploy on apache2<br>
sh deploy_apache2.sh</p>

<p>To deploy on apache<br>
sh deploy_apache.sh</p>

<p>All the libraries are loaded.</p>

<p><b>Note that in the line no. 12 of the script above we change the name libaxis_expat.so to libaxis_xmlparser.so.
If we use xerces we need to change libaxis_xercesc.so to libaxis_xmlparser.so</b>.</p>

<p>If you have done installation successfully it will display the Axis C++ welcome page when you point to URI http://localhost/axis</p> .
<p><b>Note: In the axis welcome page all the services in $AXIS_HOME/conf/server.wsdd are listed. This does not mean
that the libraries corresponding to these services are deployed yet. It merely list whatever in the server.wsdd.</b></p>

<p>To run interop samples</p>
<p>cd $AXISCPP_HOME/samples/client<br>
sh run_interoptests.sh<br>
By default this script assumes that apache is running in the localhost at port 80<br>
If you want other<br>
sh run_interoptests.sh &lt;server&gt &lt;port&gt<br>
eg: sh run_interoptests.sh -u localhost -p 80<br></p>


<br>
<div id="pdf" align="right">
<a href="lininstall-guide.pdf"><img alt="PDF" src="../skin/images/pdfdoc.gif" class="skin"><br>
          PDF</a>
</body>
</html>