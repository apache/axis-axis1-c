<?xml version="1.0"?>

<!--

Build file for code/WSDL generation necessary for interop3/groupE tests.

Notes:
   This is a build file for use with the Jakarta Ant build tool.

Prerequisites:
   A successful Axis build configuration.

Author:
  Glyn Normington <glyn@apache.org>

Copyright:
  Copyright (c) 2002 Apache Software Foundation.

-->

<project name="Interop3GroupE" default="Interop3GroupE.main">

    <path id="test-classpath">
        <pathelement location="${build.dest}" />
        <pathelement path="${java.class.path}" />
        <pathelement location="${java.home}/../lib/tools.jar"/>
        <fileset dir="../java/lib">
            <include name="*.jar"/>
        </fileset>
    </path>

    <taskdef name="wsdl2java" classname="test.wsdl.Wsdl2javaAntTask">
        <classpath refid="test-classpath" />
    </taskdef>

    <taskdef name="java2wsdl" classname="test.wsdl.Java2WsdlAntTask">
        <classpath refid="test-classpath" />
    </taskdef>

    <target name="Interop3GroupE.main">

        <!-- Use this to check the classpath if the ANT Task fails... -->
        <!--
        <property name="test-classpath.property" refid="test-classpath"/>
        <echo message="Classpath for Interop3GroupE : ${test-classpath.property}"/>
        -->

        <!-- Copy files to work directory -->
        <copy todir="${build.dir}/work/test/wsdl/interop3/groupE" overwrite="yes">
            <fileset dir="${test.dir}/wsdl/interop3/groupE">
                <include name="**.java"/>
                <include name="**.wsdd"/>
            </fileset>
        </copy>

        <!-- Compile Java -->
        <javac srcdir="${build.dir}/work" destdir="${build.dest}"
               debug="${debug}">
            <classpath refid="test-classpath" />
            <include name="test/wsdl/interop3/groupE/**.java" />
            <exclude name="test/wsdl/interop3/groupE/*TestCase.java" />
            <exclude name="test/wsdl/interop3/groupE/*Impl.java" />
            <exclude name="test/wsdl/interop3/groupE/PackageTests.java" />
        </javac>

        <!-- Now create WSDL files from the Java classes -->
        <echo message="test/wsdl/interop3/groupE/InteropTestDocLit is rpc/enc and should be doc/lit"/>
        <java2wsdl output="build/work/test/wsdl/interop3/groupE/InteropTestDocLit.wsdl"
            className="test.wsdl.interop3.groupE.InteropTestDocLit"
            namespace="http://soapinterop.org/WSDLInteropTestDocLit"
            location="http://localhost:8080/axis/services/InteropTestDocLit">
            <mapping namespace="http://soapinterop.org/xsd"
                     package="test.wsdl.interop3.groupE"/>
        </java2wsdl>
        <java2wsdl output="build/work/test/wsdl/interop3/groupE/InteropTestRpcEnc.wsdl"
            className="test.wsdl.interop3.groupE.InteropTestRpcEnc"
            namespace="http://soapinterop.org/WSDLInteropTestRpcEnc"
            location="http://localhost:8080/axis/services/InteropTestRpcEnc">
            <mapping namespace="http://soapinterop.org/xsd"
                     package="test.wsdl.interop3.groupE"/>
        </java2wsdl>
        <java2wsdl output="build/work/test/wsdl/interop3/groupE/InteropTestList.wsdl"
            className="test.wsdl.interop3.groupE.InteropTestList"
            namespace="http://soapinterop.org/WSDLInteropTestList"
            location="http://localhost:8080/axis/services/InteropTestList">
            <mapping namespace="http://soapinterop.org/xsd"
                     package="test.wsdl.interop3.groupE"/>
        </java2wsdl>

        <!-- Create Java files from the WSDL -->
        <wsdl2java url="build/work/test/wsdl/interop3/groupE/InteropTestDocLit.wsdl"
                   output="build/work"
                   deployscope="session"
                   noimports="no"
                   verbose="no"
                   testcase="no">
            <mapping namespace="http://soapinterop.org/WSDLInteropTestDocLit"
                     package="test.wsdl.interop3.groupE.client"/>
            <mapping namespace="http://soapinterop.org/xsd"
                     package="test.wsdl.interop3.groupE.client"/>
        </wsdl2java>
        <wsdl2java url="build/work/test/wsdl/interop3/groupE/InteropTestRpcEnc.wsdl"
                   output="build/work"
                   deployscope="session"
                   noimports="no"
                   verbose="no"
                   testcase="no">
            <mapping namespace="http://soapinterop.org/WSDLInteropTestRpcEnc"
                     package="test.wsdl.interop3.groupE.client"/>
            <mapping namespace="http://soapinterop.org/xsd"
                     package="test.wsdl.interop3.groupE.client"/>
        </wsdl2java>
        <wsdl2java url="build/work/test/wsdl/interop3/groupE/InteropTestList.wsdl"
                   output="build/work"
                   deployscope="session"
                   noimports="no"
                   verbose="no"
                   testcase="no">
            <mapping namespace="http://soapinterop.org/WSDLInteropTestList"
                     package="test.wsdl.interop3.groupE.client"/>
            <mapping namespace="http://soapinterop.org/xsd"
                     package="test.wsdl.interop3.groupE.client"/>
        </wsdl2java>

        <!-- Copy files to work directory -->
        <copy todir="${build.dir}/work/test/wsdl/interop3/groupE/client" overwrite="yes">
            <fileset dir="${test.dir}/wsdl/interop3/groupE/client">
                <include name="**.java"/>
            </fileset>
        </copy>

        <!-- Compile Java -->
        <javac srcdir="${build.dir}/work" destdir="${build.dest}" debug="${debug}">
            <classpath refid="test-classpath" />
            <include name="test/wsdl/interop3/groupE/**.java" />
            <include name="test/wsdl/interop3/groupE/client/**.java" />
        </javac>

        <echo message="end of InteropTestSuite.main"/>
        <echo message=""/>
    </target>
</project>
