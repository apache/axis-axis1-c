<project name="Round3" default="main">
  <property name="root.dir" value="../../../.."/>

  <path id="test-classpath">
    <pathelement location="${build.dest}" />
    <pathelement path="${java.class.path}" />
    <pathelement location="${java.home}/../lib/tools.jar"/>
    <fileset dir="${root.dir}/lib">
      <include name="*.jar"/>
    </fileset>
  </path>

  <taskdef name="wsdl2java" classname="test.wsdl.Wsdl2javaAntTask">
      <classpath refid="test-classpath"/>
  </taskdef>

  <target name="main">
    <property name="testname" value="docLitParam"/>

    <!-- generate skeletons -->
    <!-- The white mesa WSDL has the same port name for this test as for the
         docLit test, which means Axis gets two services with the same name -->
    <!-- url="http://www.whitemesa.com/r3/InteropTestDocLitParameters.wsdl" -->
    <wsdl2java url="test/wsdl/interop3/docLitParam/interoptestdoclitparameters.wsdl"
               output="${root.dir}/build/work" skeletonDeploy="yes"
               serverSide="yes"/>

    <mkdir dir="${build.dest}"/>

    <copy file="WSDLInteropTestDocLitPortBindingImpl.java" overwrite="true"
          todir="${root.dir}/build/work/test/wsdl/interop3/${testname}"/>

    <copy file="DocLitParamTestCase.java"
          todir="${root.dir}/build/work/test/wsdl/interop3/${testname}"/>

    <!-- compile the skeletons -->
    <javac srcdir="${build.dir}/work" 
      destdir="${build.dest}" debug="on">
      <classpath refid="test-classpath" />
      <include name="test/wsdl/interop3/${testname}/*.java" />
    </javac>
  </target>

</project>
