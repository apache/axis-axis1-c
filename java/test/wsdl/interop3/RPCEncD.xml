

<project name="EmptySATest" default="main" basedir="../../..">

  <target name="check">
    <echo message="${build.dest}"/>
  </target>

  <path id="test-classpath">
    <pathelement location="${build.dest}" />
    <pathelement path="${java.class.path}" />
    <pathelement location="${java.home}/../lib/tools.jar"/>
    <fileset dir="lib">
     <include name="*.jar"/>
    </fileset>
  </path>

  <taskdef name="wsdl2java"
           classname="test.wsdl.Wsdl2javaAntTask">
      <classpath refid="test-classpath" />
  </taskdef>

  <taskdef name="java2wsdl"
           classname="test.wsdl.Java2WsdlAntTask">
      <classpath refid="test-classpath" />
  </taskdef>

  <target name="main">
    <property file="axis.properties"/>
    <property name="namespace" value="http://soapinterop.org/WSDLInteropTestRpcEnc"/>
    <property name="package" value="test.wsdl.interop3.rpcd"/>

    <!-- EmptySA -->
    <!-- Steps 1, 2 and 4: -->
    <wsdl2java url="http://www.whitemesa.com/r3/InteropTestRpcEnc.wsdl"
               output="${basedir}/build/work"
               skeleton="yes">
        <mapping namespace="${namespace}" package="${package}"/>
    </wsdl2java>
    <javac srcdir="${build.dir}/work" destdir="${build.dest}" debug="on">
      <classpath refid="test-classpath" />
      <include name="test/wsdl/interop3/rpcd/*.java" />
    </javac>

    <!-- Step 3:  see test/wsdl/interop3/Import1TestCase.java -->
    <!-- Step 5:  see test/wsdl/interop3/Import1TestCase.java -->

    <!-- Step 6:  -->
    <java2wsdl output="${basedir}/build/work/test/wsdl/interop3/rpcd.wsdl"
               className= "test.wsdl.interop3.rpcd.WSDLInteropTestRpcEncPortType"
               namespace="${namespace}"
           location="http://localhost:8080/axis/services/SoapInteropRPCDPort">
        <mapping namespace="${namespace}" package="${package}"/>
    </java2wsdl>
    <wsdl2java url="${basedir}/build/work/test/wsdl/interop3/rpcd.wsdl"
               output="${basedir}/build/work"
               skeleton="yes">
        <mapping namespace="${namespace}" package="${package}.step6"/>
    </wsdl2java>

    <!-- Step 7:  see test/wsdl/interop3/Import1TestCase.java -->
    <!-- Step 8:  see test/wsdl/interop3/Import1TestCase.java -->
    </target>
</project>
