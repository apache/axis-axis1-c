<?xml version="1.0"?>
<!DOCTYPE project [
        <!ENTITY properties SYSTEM "file:../../../xmls/properties.xml">
        <!ENTITY paths  SYSTEM "file:../../../xmls/path_refs.xml">
        <!ENTITY taskdefs SYSTEM "file:../../../xmls/taskdefs.xml">
        <!ENTITY taskdefs_post_compile SYSTEM "file:../../../xmls/taskdefs_post_compile.xml">
        <!ENTITY targets SYSTEM "file:../../../xmls/targets.xml">
]>

<!-- ===================================================================
<description>
   Test/Sample Component file for Axis

Notes:
   This is a build file for use with the Jakarta Ant build tool.

Prerequisites:

   jakarta-ant from http://jakarta.apache.org

Build Instructions:
   To compile
        ant compile
   To execute
        ant run

Author:
  Matt Seibert mseibert@us.ibm.com

Copyright:
  Copyright (c) 2002-2003 Apache Software Foundation.
</description>
==================================================================== -->

<project name="EmptySATest" default="main">
<property name="axis.home" location="../../.." />
<property name="componentName" value="test/wsdl/interop3/import1" />
        &properties;
        &paths;
        &taskdefs;
        &taskdefs_post_compile;
        &targets;

  <target name="check">
    <echo message="${build.dest}"/>
  </target>

  <path id="test-classpath">
    <pathelement location="${build.dest}" />
    <pathelement path="${java.class.path}" />
    <pathelement location="${java.home}/../lib/tools.jar"/>
    <fileset dir="lib">
     <include name="*.jar"/>
    </fileset>
  </path>

  <taskdef name="wsdl2java"
           classname="org.apache.axis.tools.ant.wsdl.Wsdl2javaAntTask">
      <classpath refid="test-classpath" />
  </taskdef>

  <taskdef name="java2wsdl"
           classname="org.apache.axis.tools.ant.wsdl.Java2WsdlAntTask">
      <classpath refid="test-classpath" />
  </taskdef>

  <target name="main">
    <property file="${basedir}/axis.properties"/>
    <property name="originalWSDL" value="http://www.whitemesa.net/r3/import2.wsdl"/>

    <!-- EmptySA -->
    <!-- Steps 1, 2 and 4: -->
    <wsdl2java url="${originalWSDL}"
               output="${basedir}/build/work"
               skeleton="yes">
        <mapping namespace="http://soapinterop.org/main/" package="test.wsdl.interop3.import2"/>
        <mapping namespace="http://soapinterop.org/definitions/" package="test.wsdl.interop3.import2.definitions"/>
        <mapping namespace="http://soapinterop.org/xsd" package="test.wsdl.interop3.import2.xsd"/>
    </wsdl2java>

    <javac srcdir="${build.dir}/work" destdir="${build.dest}" debug="on">
      <classpath refid="test-classpath" />
      <include name="test/wsdl/interop3/import2/*.java" />
    </javac>

    <!-- Step 3:  see test/wsdl/interop3/Import2TestCase.java -->
    <!-- Step 5:  see test/wsdl/interop3/Import2TestCase.java -->

    <!-- Step 6:  -->
    <java2wsdl output="${basedir}/build/work/test/wsdl/interop3/import2.wsdl"
               className= "test.wsdl.interop3.import2.definitions.SoapInteropImport2PortType"
               namespace="http://soapinterop.org/definitions/"
           location="http://localhost:8080/axis/services/SoapInteropImport2Port">
        <mapping namespace="http://soapinterop.org/main/" package="test.wsdl.interop3.import2"/>
        <mapping namespace="http://soapinterop.org/definitions/" package="test.wsdl.interop3.import2.definitions"/>
        <mapping namespace="http://soapinterop.org/xsd" package="test.wsdl.interop3.import2.xsd"/>
    </java2wsdl>
    <wsdl2java url="${basedir}/build/work/test/wsdl/interop3/import2.wsdl"
               output="${basedir}/build/work"
               skeleton="yes">
        <mapping namespace="http://soapinterop.org/main/" package="test.wsdl.interop3.import2.step6"/>
        <mapping namespace="http://soapinterop.org/definitions/" package="test.wsdl.interop3.import2.step6.definitions"/>
        <mapping namespace="http://soapinterop.org/xsd" package="test.wsdl.interop3.import2.step6.xsd"/>
    </wsdl2java>

    <copy file="test/wsdl/interop3/Import2TestCase.java" todir="build/work/test/wsdl/interop3"/>

    <javac srcdir="build/work" destdir="${build.dest}" debug="${debug}">
        <classpath refid="test-classpath"/>
        <include name="test/wsdl/interop3/Import2TestCase.java"/>
    </javac>

    <!-- Step 7:  see test/wsdl/interop3/Import2TestCase.java -->
    <!-- Step 8:  see test/wsdl/interop3/Import2TestCase.java -->
    </target>
</project>
