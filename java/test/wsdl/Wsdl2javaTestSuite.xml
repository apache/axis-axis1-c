<?xml version="1.0"?>

<project name="Wsdl2javaTestSuite" default="main">

  <path id="test-classpath">
    <pathelement location="${build.dest}" />
    <pathelement path="${java.class.path}" />
    <pathelement location="${java.home}/../lib/tools.jar"/>
    <fileset dir="../java/lib">
     <include name="*.jar"/>
    </fileset>
  </path>

  <taskdef name="wsdl2java" 
           classname="test.wsdl.Wsdl2javaAntTask">
      <classpath refid="test-classpath" />
  </taskdef>

  <taskdef name="java2wsdl" 
           classname="test.wsdl.Java2WsdlAntTask">
      <classpath refid="test-classpath" />
  </taskdef>

  <target name="main">
    <!-- Use this to check the classpath if the ANT Task fails... -->
    <!--
    <property name="test-classpath.property" refid="test-classpath"/>
    <echo message="Classpath for wsdl2java task : ${test-classpath.property}"/>
    -->
    <echo message="Running WSDL2Java and Java2WSDL Emitters"/>
    <!-- AddressBook Sample -->
    <wsdl2java url="samples/addr/AddressBook.wsdl"
               output="build/work"
               deployscope="session"
               skeleton="yes"
               noimports="no"
               verbose="no"
               testcase="no">
        <mapping namespace="urn:AddressFetcher2" package="samples.addr"/>
    </wsdl2java>

    <!-- WidgetPrice Java to WSDL Samples -->
    <java2wsdl output="build/work/samples/userguide/example6/WidgetPrice.wsdl"
               className= "samples.userguide.example6.WidgetPrice"
               namespace="urn:Example6"
               location="http://localhost:8080/axis/services/WidgetPrice">
        <mapping namespace="urn:Example6" package="samples.userguide.example6"/>
    </java2wsdl>
   <wsdl2java url="build/work/samples/userguide/example6/WidgetPrice.wsdl"
               output="build/work"
               deployscope="session"
               skeleton="yes"
               noimports="no"
               verbose="no"
               testcase="yes">
        <mapping namespace="urn:Example6" package="samples.userguide.example6"/>
    </wsdl2java>

    <!-- MultiRef Test -->
    <wsdl2java url="test/wsdl/multiref/MultiRefTest.wsdl"
               output="build/work"
               deployscope="session"
               skeleton="yes"
               noimports="no"
               verbose="no"
               testcase="no">
        <mapping namespace="urn:MultiRefTest2" package="test.wsdl.multiref"/>
    </wsdl2java>

    <!-- Multithread Test -->
    <wsdl2java url="test/wsdl/multithread/AddressBook.wsdl"
               output="build/work"
               deployscope="session"
               skeleton="yes">
    </wsdl2java>

    <!-- Operation style test (oneway, request/response, -->
    <!-- solicit/response, notification -->
    <wsdl2java url="test/wsdl/opStyles/opStyles.wsdl"
               output="build/work"
               skeleton="yes"
               testcase="yes">
    </wsdl2java>

    <!-- RefAttr Test -->
    <wsdl2java url="test/wsdl/refattr/refattr.wsdl"
               output="build/work"
               deployscope="session"
               skeleton="yes"
               noimports="no"
               verbose="no"
               testcase="no">
        <mapping namespace="urn:ref.types.test" package="test.wsdl.refattr"/>
        <mapping namespace="urn:ref.types" package="test.wsdl.refattr"/>
    </wsdl2java>

    <!-- Sequence Test -->
    <!-- Generate Java From WSDL -->
    <wsdl2java url="test/wsdl/sequence/SequenceTest.wsdl"
               output="build/work"
               deployscope="session"
               skeleton="yes"
               noimports="no"
               verbose="no"
               testcase="no">
        <mapping namespace="urn:SequenceTest2" package="test.wsdl.sequence"/>
    </wsdl2java>
    <!-- Copy modified files to work directory -->
    <copy todir="${build.dir}/work/test/wsdl/sequence" overwrite="yes">
      <fileset dir="${test.dir}/wsdl/sequence">
        <include name="SequenceInfo.java"/>
      </fileset>
    </copy>
    <!-- Compile Java -->
    <javac srcdir="${build.dir}/work" destdir="${build.dest}" debug="${debug}">
      <classpath refid="test-classpath" />
      <include name="test/wsdl/sequence/**.java" />
      <exclude name="test/wsdl/sequence/*TestCase.java" />
      <exclude name="test/wsdl/sequence/*Impl.java" />
    </javac>
    <!-- Now create a WSDL file from the Java classes -->
    <java2wsdl output="build/work/test/wsdl/sequence/SequenceTest.wsdl"
               className= "test.wsdl.sequence.SequenceTestPortType"
               implClass= "test.wsdl.sequence.SequenceTestSoapBindingSkeleton"
               namespace="urn:SequenceTest2"
               location="http://localhost:8080/axis/services/SequenceTest">
        <mapping namespace="urn:SequenceTest2" package="test.wsdl.sequence"/>
    </java2wsdl>
    <!-- Delete the intermediate files so we recreate over a clean slate -->
    <delete dir="${build.dir}/classes/test/wsdl/sequence"/>
    <!-- Recreate Java files from the new WSDL -->
    <wsdl2java url="build/work/test/wsdl/sequence/SequenceTest.wsdl"
               output="build/work"
               deployscope="session"
               skeleton="yes"
               noimports="no"
               verbose="no"
               testcase="no">
        <mapping namespace="urn:SequenceTest2" package="test.wsdl.sequence"/>
    </wsdl2java>

    <!-- ArrayTest Test -->
    <wsdl2java url="test/wsdl/arrays/ArrayTest.wsdl"
               output="build/work"
               deployscope="session"
               skeleton="yes"
               noimports="no"
               verbose="no"
               testcase="no">
        <mapping namespace="urn:ArrayTest2" package="test.wsdl.arrays"/>
    </wsdl2java>

    <!-- MArrayTests Test -->
    <wsdl2java url="test/wsdl/marrays/MArrayTest.wsdl"
               output="build/work"
               deployscope="session"
               skeleton="yes"
               testcase="yes">
        <mapping namespace="urn:MArrayTests" package="test.wsdl.marrays"/>
    </wsdl2java>

    <!-- Import Test 1:  some namespace->package mappings from the -->
    <!--                 command line, some generated, some from   -->
    <!--                 NStoPkg.properties.                       -->
    <wsdl2java url="test/wsdl/_import/Import.wsdl"
               output="build/work"
               deployscope="none"
               skeleton="yes"
               noimports="no"
               verbose="no"
               testcase="yes">
        <mapping namespace="urn:import" package="test.wsdl.import"/>
        <mapping namespace="urn:importBinding1" package="test.wsdl.import.binding1"/>
        <mapping namespace="urn:importBinding2" package="test.wsdl.import.binding2"/>
    </wsdl2java>
    <!-- Import Test 2:  all namespace->package mappings from the -->
    <!--                 command line.                            -->
    <wsdl2java url="test/wsdl/_import/Import.wsdl"
               output="build/work"
               deployscope="none"
               skeleton="yes"
               noimports="no"
               verbose="no"
               testcase="yes">
        <mapping namespace="urn:import" package="test.import2"/>
        <mapping namespace="urn:importBinding1" package="test.import2.binding1"/>
        <mapping namespace="urn:importBinding2" package="test.import2.binding2"/>
        <mapping namespace="urn:types.import.test" package="test.import2.types"/>
        <mapping namespace="urn:iface.import.test" package="test.import2.iface"/>
        <mapping namespace="urn:messages.import.test" package="test.import2.messages"/>
    </wsdl2java>

    <!-- InOut Sample -->
    <wsdl2java url="test/wsdl/inout/inout.wsdl"
               output="build/work"
               deployscope="none"
               skeleton="yes"
               noimports="no"
               verbose="no"
               testcase="no">
        <mapping namespace="http://www.apache.org/inout" package="test.wsdl.inout"/>
    </wsdl2java>

    <!-- SOAPBuilders Interoperability Lab "Round 1" -->
    <!--     http://www.xmethods.net/ilab/           -->
    <wsdl2java url="http://www.xmethods.net/tmodels/InteropTest.wsdl"
               output="build/work"
               deployscope="none"
               skeleton="yes"
               noimports="no"
               verbose="no"
               testcase="no">
        <mapping namespace="http://soapinterop.org/" package="net.xmethods"/>
        <mapping namespace="http://soapinterop.org/xsd" package="net.xmethods"/>
    </wsdl2java>

    <!-- SOAPBuilders Interoperability Lab "Round 2" -->
    <!--     http://www.whitemesa.com/interop.htm    -->
    <wsdl2java url="http://www.whitemesa.com/interop/InteropTest.wsdl"
               output="build/work"
               deployscope="none"
               skeleton="yes"
               noimports="no"
               verbose="no"
               testcase="no">
        <mapping namespace="http://soapinterop.org/" package="interop.test"/>
        <mapping namespace="http://soapinterop.org/xsd" package="interop.test"/>
    </wsdl2java>
    <wsdl2java url="http://www.whitemesa.com/interop/InteropTestB.wsdl"
               output="build/work"
               deployscope="none"
               skeleton="yes"
               noimports="no"
               verbose="no"
               testcase="no">
        <mapping namespace="http://soapinterop.org/" package="interop.testb"/>
        <mapping namespace="http://soapinterop.org/xsd" package="interop.testb"/>
    </wsdl2java>

    <!-- More information at: http://www.whitemesa.net/  -->
    <wsdl2java url="http://www.whitemesa.net/wsdl/std/echoheadersvc.wsdl"
               output="build/work"
               testcase="no"
               deployscope="none"
               skeleton="yes"
               verbose="no"
               noimports="no">
        <mapping namespace="http://soapinterop.org/" package="interop.echoheadersvc"/>
        <mapping namespace="http://soapinterop.org/xsd" package="interop.echoheadersvc"/>
    </wsdl2java>

    <!-- http://www.mssoapinterop.org/stk/roundBC.htm -->
    <wsdl2java url="http://mssoapinterop.org/stk/InteropB.wsdl"
               output="build/work"
               testcase="no"
               deployscope="none"
               skeleton="yes"
               verbose="no"
               noimports="no">
        <mapping namespace="http://soapinterop.org/" package="mssoapinterop.interopb"/>
        <mapping namespace="http://soapinterop.org/xsd" package="mssoapinterop.interopb"/>
    </wsdl2java>

    <wsdl2java url="http://mssoapinterop.org/stk/InteropBtyped.wsdl"
               output="build/work"
               testcase="no"
               deployscope="none"
               skeleton="yes"
               verbose="no"
               noimports="no">
        <mapping namespace="http://soapinterop.org/" package="mssoapinterop.interopbtyped"/>
        <mapping namespace="http://soapinterop.org/xsd" package="mssoapinterop.interopbtyped"/>
    </wsdl2java>

    <wsdl2java url="http://mssoapinterop.org/stk/InteropC.wsdl"
               output="build/work"
               testcase="no"
               deployscope="none"
               skeleton="yes"
               verbose="no"
               noimports="no">
        <mapping namespace="http://soapinterop.org" package="mssoapinterop.interopc"/>
        <mapping namespace="http://soapinterop.org/" package="mssoapinterop.interopc"/>
        <mapping namespace="http://soapinterop.org/xsd" package="mssoapinterop.interopc"/>
    </wsdl2java>

    <!-- PortType/Service name clash test -->
    <wsdl2java url="test/clash/AirportWeather.xml"
               output="build/work"
               testcase="yes"
               deployscope="none"
               skeleton="yes"
               verbose="no"
               noimports="no">
        <mapping namespace="http://www.capeclear.com/AirportWeather.wsdl" package="test.clash"/>
        <mapping namespace="http://www.capeclear.com/AirportWeather.xsd" package="test.clash.types"/>
    </wsdl2java>

    <!-- WSDL fault generation test -->
    <wsdl2java url="test/wsdl/faults/FaultService.wsdl"
               output="build/work"
               testcase="yes"
               deployscope="none"
               skeleton="yes"
               verbose="no"
               noimports="no">
        <mapping namespace="http://test.com/wsdl/faults" package="test.wsdl.faults"/>
    </wsdl2java>

    <!-- UDDI 1.0 WSDL's -->
    <wsdl2java url="http://www.uddi.org/wsdl/inquire_v1.wsdl"
               output="build/work"
               testcase="no"
               deployscope="none"
               skeleton="yes"
               verbose="no"
               noimports="no">
        <mapping namespace="urn:uddi-org:api" package="org.uddi.api"/>
        <mapping namespace="urn:uddi-org:inquiry" package="org.uddi.inquiry"/>
    </wsdl2java>
    <wsdl2java url="http://www.uddi.org/wsdl/publish_v1.wsdl"
               output="build/work"
               testcase="no"
               deployscope="none"
               skeleton="yes"
               verbose="no"
               noimports="no">
        <mapping namespace="urn:uddi-org:api" package="org.uddi.api"/>
        <mapping namespace="urn:uddi-org:publication" package="org.uddi.publication"/>
    </wsdl2java>

    <!-- XMethods Delayed Quote Service from http://www.xmethods.net/detail.html?id=2 -->
    <wsdl2java url="http://services.xmethods.net/soap/urn:xmethods-delayed-quotes.wsdl"
               output="build/work"
               testcase="no"
               deployscope="none"
               skeleton="yes"
               verbose="no"
               noimports="no">
    </wsdl2java>

    <!-- Verify files generated based on what is referenced in WSDL -->
    <wsdl2java url="test/wsdl/filegen/FileGen.wsdl"
               output="build/work"
               deployscope="none"
               skeleton="no"
               noimports="no"
               verbose="no"
               testcase="no">
        <mapping namespace="http://test.com/reference" package="test.wsdl.filegen"/>
    </wsdl2java>
    
    <!-- Check to make sure we map XML names that are illegal Java correctly -->
    <wsdl2java url="test/wsdl/names/JavaNames.wsdl"
               output="build/work"
               deployscope="none"
               skeleton="yes"
               noimports="no"
               verbose="no"
               testcase="yes">
        <mapping namespace="http://test.com/reference" package="test.filegen"/>
    </wsdl2java>

    <!-- This is (OK, "will be") a comprehensive test of XML schema types -->
    <wsdl2java url="test/wsdl/types/ComprehensiveTypes.wsdl"
               output="build/work"
               skeleton="yes"
               testcase="yes">
    </wsdl2java>

    <!-- This tests parameterOrder.  -->
    <wsdl2java url="test/wsdl/parameterOrder/parameterOrder.wsdl"
               output="build/work"
               skeleton="yes"
               testcase="yes">
    </wsdl2java>

    <!-- This tests .NET document/literal WSDL.  -->
    <!-- <wsdl2java url="http://www.perfectxml.net/WebServices/SalesRankNPrice/BookService.asmx?WSDL" -->
    <wsdl2java url="test/wsdl/literal/SalesRankNPrice.wsdl"
               output="build/work"
               verbose="no"
               skeleton="no"
               testcase="no">
        <mapping namespace="http://www.PerfectXML.com/NETWebSvcs/BookService" package="test.wsdl.literal"/>
               
    </wsdl2java>

    <!-- The following WSDL are BAD.  We're keeping them here so we can -->
    <!-- check periodically to see whether the owner has fixed them.    -->

    <!-- Real-time Quote Server from http://www.xmltoday.com/examples/soap/realtime.psp -->
    <!--
    <wsdl2java url="http://services.xmltoday.com/vx_engine/wsdl.vep?realtime.wsdl"
               output="build/work"
               testcase="no"
               deployscope="none"
               skeleton="yes"
               verbose="no"
               noimports="no">
        <mapping namespace="urn:vgx-realtime" package="com.velocigen.thor"/>
    </wsdl2java>

    <wsdl2java url="http://services.xmltoday.com/vx_engine/wsdl_publish.vep/realtime.wsdl"
               output="build/work"
               testcase="no"
               deployscope="none"
               skeleton="yes"
               verbose="yes"
               noimports="no">
    </wsdl2java>

    More information at: http://www.whitemesa.com/interop/proposalC.html
    this WSDL file is bad.  It refers to portType "InteropTestPortType" but that portType is not defined.
    <wsdl2java url="http://www.whitemesa.com/interop/echoHeaderBindings.wsdl"
               output="build/work"
               testcase="no"
               deployscope="none"
               skeleton="yes"
               verbose="yes"
               noimports="no">
        <mapping namespace="http://soapinterop.org/" package="interop.echoheader"/>
        <mapping namespace="http://soapinterop.org/xsd" package="interop.echoheader"/>
    </wsdl2java>

    Reverse lookup of US Area codes and International Country codes from
    http://www.soapclient.com/uddi/uddi.sri?requestname=get_xmethods

    namespaces are used improperly

    > WSDL2Java http://www.taragroup.com/bin/AreaCode.exe/wsdl/iGetArea
    java.io.IOException: Emitter failure.  There is an undefined binding (IGetAreabinding) in the WSDL document.
    Hint: make sure <port binding=".."> is fully qualified.

    <wsdl2java url="http://www.taragroup.com/bin/AreaCode.exe/wsdl/iGetArea"
               output="build/work"
               testcase="no"
               deployscope="none"
               skeleton="yes"
               verbose="yes"
               noimports="no">
    </wsdl2java>

    wrong namespace used when referring to types:

    > WSDL2Java http://www.lemurlabs.com/projects/soap/fortune/FortuneService.wsdl
    java.io.IOException: Type http://www.lemurlabs.com/projects/soap/fortune/FortuneService.wsdl:ArrayOfString is referenced but not defined.

    <wsdl2java url="http://www.lemurlabs.com/projects/soap/fortune/FortuneService.wsdl"
               output="build/work"
               testcase="no"
               deployscope="none"
               skeleton="yes"
               verbose="yes"
               noimports="no">
    </wsdl2java>

    -->

  </target>
</project>

