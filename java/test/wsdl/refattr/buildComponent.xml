<?xml version="1.0" ?>
<!DOCTYPE project [
        <!ENTITY properties SYSTEM "file:../../../xmls/properties.xml">
        <!ENTITY paths  SYSTEM "file:../../../xmls/path_refs.xml">
        <!ENTITY taskdefs SYSTEM "file:../../../xmls/taskdefs.xml">
        <!ENTITY taskdefs_post_compile SYSTEM "file:../../../xmls/taskdefs_post_compile.xml">
]>

<!-- ===================================================================
==================================================================== -->

<project default="compile">

        &properties;
        &paths;
        &taskdefs;
        &taskdefs_post_compile;

  <property name="testName" value="wsdl/refattr"/>

<target name="clean"/>

<target name="copy"/>

<target name="compile" depends="copy">
  <echo message="Compilig test.wsdl.refattr"/>
    <!-- RefAttr Test -->
    <wsdl2java url="test/wsdl/refattr/refattr.wsdl"
               output="build/work"
               deployscope="session"
               serverSide="yes"
               noimports="no"
               verbose="no"
               testcase="no">
        <mapping namespace="urn:ref.types.test" package="test.wsdl.refattr"/>
        <mapping namespace="urn:ref.types" package="test.wsdl.refattr"/>
    </wsdl2java>
</target>

<target name="deploy" unless="batch">
<!--    <ant inheritAll="true" antfile="test/startServer.xml" target="start-functional-test-tcp-server" /> -->
<!--   <ant inheritAll="true" antfile="test/startServer.xml" target="start-functional-test-http-server" /> -->
<!-- if ! batch -->
<!-- start the server -->
</target>

<target name="run"  depends="compile,deploy" >
   <junit dir="." printsummary="yes" haltonfailure="${test.functional.fail}" fork="yes">
      <classpath refid="classpath" />
      <formatter type="xml" usefile="${test.functional.usefile}"/>
      <batchtest todir="${test.functional.reportdir}">
        <fileset dir="${build.dest}">
           <include name="test/${testName}/*TestCase.class" />
           <include name="test/${testName}/**/*TestCase.class" />
        </fileset>
      </batchtest>
   </junit>
   <antcall target="undeploy"/>
 </target>

<target name="undeploy" unless="batch">
<!--    <ant inheritAll="true" antfile="test/startServer.xml" target="stop-functional-test-http-server" /> -->
</target>

</project>
